<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>lesson1-vue的生命周期</title>
    <style>
        * {
            list-style-type: none;
        }
    </style>
</head>

<body>
    <h1>本课目标——Vue结合axios获取远程json数据并简单展示在页面，设计删除按钮</h1>
    <!-- 10、innerHTML div标签里面的内容，outterHTML 包括div标签 -->
    <div id="app">
        <br><br>
        <input type="text" v-model="nickname">
        {{nickname}}
        <br><br>
        <ul>
            <li v-for="(item,i) in arr">
                <a v-bind:href="'detail.html?id='+item.id">{{i+1}},{{item.songName}}</a>
                <button @click="del(i)">删除</button>
            </li>
        </ul>
    </div>
    <!-- 1、引入vue.js文件 -->
    <script src="https://cdn.bootcss.com/vue/2.6.10/vue.js"></script>
    <!-- 2、引入axios.js文件 -->
    <script src="https://cdn.bootcss.com/axios/0.19.0-beta.1/axios.js"></script>

    <script>
        Vue.config.productionTip = false
        // 7、则返回vm对象
        var vm = new Vue({
            //    9、如果有template，则渲染template里面的内容到页面，页面只有123了
            // template: '<h1>123</h1>',
            //    6、如果没有“el”
            // el: "#app",
            data() {
                return {
                    nickname: "Simba",
                    arr: [111, 222, 333, 444]
                }
            },
            //3、 Vue的生命周期：
            // 4、创建vue实例前的钩子函数
            beforeCreate() {
                // vue规范所提供的属性名字：“$data”实例属性，Vue实例对data对象属性的访问
                console.log("beforeCreate", this.$data, this.$el)
            },
            // 5、
            created() {
                console.log("created", this.$data, this.$el)
                // data准备好了
                this.getData()
            },
            // 11、beforeMount
            beforeMount() {
                // 12、渲染之前的代码
                console.log("beforeMount", this.$data, this.$el.innerHTML)
            },
            mounted() {
                // dom准备好了
                // 13、把编译之后的代码打印出来了
                console.log("mounted", this.$data, this.$el.innerHTML)
            },
            beforeUpdate() {
                console.log("beforeUpdate")
            },
            updated() {
                console.log("updated")
            },
            methods: {
                del(i) {
                    console.log(i)
                    this.arr.splice(i, 1)
                },
                getData() {
                    axios.get("https://music.niubishanshan.top/api/v2/music/songList/4").then(res => {
                        console.log(res.data.data)
                        this.arr = res.data.data.songList
                    })
                }
            },
        })
        // 8、没有el，没有mount()方法，则不调用，有则调用
        vm.$mount("#app")
    </script>
</body>

</html>